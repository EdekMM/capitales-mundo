<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Capitales del Mundo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 5px;
            font-size: 28px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .continent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .continent-btn {
            padding: 30px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .continent-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        .continent-emoji {
            display: block;
            font-size: 48px;
            margin-bottom: 10px;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 3px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        .difficulty-selector {
            text-align: center;
            margin-bottom: 20px;
        }
        .difficulty-selector select {
            padding: 10px 20px;
            font-size: 16px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: white;
            color: #333;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .btn-start {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-start:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .btn-back {
            width: 100%;
            padding: 12px;
            background: #999;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }
        .btn-back:hover {
            background: #777;
        }
        .question-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        .question-number {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        .question-text {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .question-country {
            font-size: 34px;
            font-weight: bold;
            margin-top: 5px;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        .option {
            padding: 15px;
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            color: #333;
        }
        .option:hover {
            border-color: #667eea;
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
            animation: correctAnim 0.5s;
        }
        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
            animation: shake 0.5s;
        }
        .option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }
        @keyframes correctAnim {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .feedback {
            text-align: center;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: bold;
            display: none;
        }
        .feedback.show {
            display: block;
        }
        .feedback.correct {
            background: #c8e6c9;
            color: #2e7d32;
        }
        .feedback.incorrect {
            background: #ffcdd2;
            color: #c62828;
        }
        .btn-next {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
        }
        .btn-next:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .btn-next.show {
            display: block;
        }
        .final-score {
            text-align: center;
            padding: 40px;
            display: none;
        }
        .final-score.show {
            display: block;
        }
        .final-score-emoji {
            font-size: 80px;
            margin-bottom: 20px;
        }
        .final-score-text {
            font-size: 24px;
            margin-bottom: 15px;
        }
        .final-score-points {
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
        }
        .btn-restart {
            padding: 15px 40px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        .btn-restart:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Men√∫ principal de continentes -->
        <div id="continentMenu">
            <h1>üåç Quiz Capitales del Mundo</h1>
            <p class="subtitle">Elige un continente para comenzar</p>
            
            <div class="continent-grid">
                <button class="continent-btn" onclick="selectContinent('europa')">
                    <span class="continent-emoji">üá™üá∫</span>
                    Europa
                </button>
                <button class="continent-btn" onclick="selectContinent('africa')">
                    <span class="continent-emoji">üåç</span>
                    √Åfrica
                </button>
                <button class="continent-btn" onclick="selectContinent('america-norte')">
                    <span class="continent-emoji">üóΩ</span>
                    Am√©rica del Norte
                </button>
                <button class="continent-btn" onclick="selectContinent('america-sur')">
                    <span class="continent-emoji">üóø</span>
                    Am√©rica del Sur
                </button>
                <button class="continent-btn" onclick="selectContinent('asia')">
                    <span class="continent-emoji">üèØ</span>
                    Asia
                </button>
                <button class="continent-btn" onclick="selectContinent('oceania')">
                    <span class="continent-emoji">ü¶ò</span>
                    Ocean√≠a
                </button>
            </div>
        </div>

        <!-- Selector de dificultad -->
        <div id="difficultyBox" style="display: none;">
            <h1 id="continentTitle">Europa</h1>
            <p class="subtitle">Elige el nivel de dificultad</p>
            
            <div class="difficulty-selector">
                <select id="difficulty">
                    <option value="facil">F√°cil</option>
                    <option value="medio">Medio</option>
                    <option value="dificil">Dif√≠cil</option>
                </select>
                <p id="difficultyInfo" style="font-size: 14px; color: #666; margin-bottom: 15px;"></p>
                <button class="btn-start" onclick="startGame()">Comenzar Quiz</button>
                <button class="btn-back" onclick="backToMenu()">‚Üê Volver al men√∫</button>
            </div>
        </div>

        <!-- √Årea de juego -->
        <div id="statsBox" style="display: none;">
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Pregunta</div>
                    <div class="stat-value" id="questionCounter">1/16</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Aciertos</div>
                    <div class="stat-value" id="correctCount">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Puntos</div>
                    <div class="stat-value" id="score">0</div>
                </div>
            </div>
        </div>

        <div class="progress-bar" id="progressBox" style="display: none;">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div id="gameArea" style="display: none;">
            <button class="btn-back" onclick="confirmBackToMenu()" style="margin-bottom: 15px;">‚Üê Volver al men√∫</button>
            
            <div class="question-card">
                <div class="question-number" id="questionNumber">Pregunta 1</div>
                <div class="question-text">¬øCu√°l es la capital de...?</div>
                <div class="question-country" id="countryName">Espa√±a</div>
            </div>

            <div class="feedback" id="feedback"></div>

            <div class="options" id="optionsContainer"></div>

            <button class="btn-next" id="btnNext">Siguiente pregunta ‚Üí</button>
        </div>

        <!-- Pantalla final -->
        <div class="final-score" id="finalScore">
            <div class="final-score-emoji" id="finalEmoji">üèÜ</div>
            <div class="final-score-text">¬°Quiz completado!</div>
            <div class="final-score-points" id="finalPoints">0 puntos</div>
            <div style="margin-bottom: 20px;">
                <div style="font-size: 20px; font-weight: bold;" id="finalMessage"></div>
            </div>
            <div id="finalButtons"></div>
            <button class="btn-back" onclick="backToMenu()">‚Üê Volver al men√∫</button>
        </div>
    </div>

    <script>
        // Base de datos de capitales por continente
        const capitalsData = {
            europa: [
                { country: 'Espa√±a', capital: 'Madrid', difficulty: 'facil' },
                { country: 'Portugal', capital: 'Lisboa', difficulty: 'facil' },
                { country: 'Francia', capital: 'Par√≠s', difficulty: 'facil' },
                { country: 'Reino Unido', capital: 'Londres', difficulty: 'facil' },
                { country: 'Irlanda', capital: 'Dubl√≠n', difficulty: 'facil' },
                { country: 'B√©lgica', capital: 'Bruselas', difficulty: 'facil' },
                { country: 'Pa√≠ses Bajos', capital: '√Åmsterdam', difficulty: 'facil' },
                { country: 'Luxemburgo', capital: 'Luxemburgo', difficulty: 'medio' },
                { country: 'Suiza', capital: 'Berna', difficulty: 'medio' },
                { country: 'M√≥naco', capital: 'M√≥naco', difficulty: 'dificil' },
                { country: 'Andorra', capital: 'Andorra la Vella', difficulty: 'dificil' },
                { country: 'Islandia', capital: 'Reikiavik', difficulty: 'medio' },
                { country: 'Noruega', capital: 'Oslo', difficulty: 'facil' },
                { country: 'Suecia', capital: 'Estocolmo', difficulty: 'facil' },
                { country: 'Finlandia', capital: 'Helsinki', difficulty: 'facil' },
                { country: 'Dinamarca', capital: 'Copenhague', difficulty: 'facil' },
                { country: 'Alemania', capital: 'Berl√≠n', difficulty: 'facil' },
                { country: 'Austria', capital: 'Viena', difficulty: 'facil' },
                { country: 'Chequia', capital: 'Praga', difficulty: 'facil' },
                { country: 'Eslovaquia', capital: 'Bratislava', difficulty: 'medio' },
                { country: 'Polonia', capital: 'Varsovia', difficulty: 'facil' },
                { country: 'Hungr√≠a', capital: 'Budapest', difficulty: 'facil' },
                { country: 'Estonia', capital: 'Tallin', difficulty: 'medio' },
                { country: 'Letonia', capital: 'Riga', difficulty: 'medio' },
                { country: 'Lituania', capital: 'Vilna', difficulty: 'medio' },
                { country: 'Bielorrusia', capital: 'Minsk', difficulty: 'medio' },
                { country: 'Ucrania', capital: 'Kiev', difficulty: 'facil' },
                { country: 'Moldavia', capital: 'Chisinau', difficulty: 'medio' },
                { country: 'Rusia', capital: 'Mosc√∫', difficulty: 'facil' },
                { country: 'Italia', capital: 'Roma', difficulty: 'facil' },
                { country: 'Ciudad del Vaticano', capital: 'Ciudad del Vaticano', difficulty: 'dificil' },
                { country: 'San Marino', capital: 'San Marino', difficulty: 'dificil' },
                { country: 'Malta', capital: 'La Valeta', difficulty: 'medio' },
                { country: 'Eslovenia', capital: 'Liubliana', difficulty: 'medio' },
                { country: 'Croacia', capital: 'Zagreb', difficulty: 'medio' },
                { country: 'Bosnia-Herzegovina', capital: 'Sarajevo', difficulty: 'medio' },
                { country: 'Serbia', capital: 'Belgrado', difficulty: 'medio' },
                { country: 'Montenegro', capital: 'Podgorica', difficulty: 'dificil' },
                { country: 'Kosovo', capital: 'Pristina', difficulty: 'dificil' },
                { country: 'Albania', capital: 'Tirana', difficulty: 'medio' },
                { country: 'Macedonia del Norte', capital: 'Skopie', difficulty: 'dificil' },
                { country: 'Bulgaria', capital: 'Sof√≠a', difficulty: 'medio' },
                { country: 'Rumania', capital: 'Bucarest', difficulty: 'medio' },
                { country: 'Grecia', capital: 'Atenas', difficulty: 'facil' },
                { country: 'Chipre', capital: 'Nicosia', difficulty: 'medio' },
                { country: 'Liechtenstein', capital: 'Vaduz', difficulty: 'dificil' },
            ],
            'america-norte': [
                { country: 'Canad√°', capital: 'Ottawa', difficulty: 'facil' },
                { country: 'Estados Unidos', capital: 'Washington D.C.', difficulty: 'facil' },
                { country: 'M√©xico', capital: 'Ciudad de M√©xico', difficulty: 'facil' }
            ],
            'america-sur': [
                { country: 'Argentina', capital: 'Buenos Aires', difficulty: 'facil' },
                { country: 'Bolivia', capital: 'Sucre', difficulty: 'medio' },
                { country: 'Brasil', capital: 'Brasilia', difficulty: 'facil' },
                { country: 'Chile', capital: 'Santiago', difficulty: 'facil' },
                { country: 'Colombia', capital: 'Bogot√°', difficulty: 'facil' },
                { country: 'Ecuador', capital: 'Quito', difficulty: 'facil' },
                { country: 'Guyana', capital: 'Georgetown', difficulty: 'medio' },
                { country: 'Paraguay', capital: 'Asunci√≥n', difficulty: 'facil' },
                { country: 'Per√∫', capital: 'Lima', difficulty: 'facil' },
                { country: 'Surinam', capital: 'Paramaribo', difficulty: 'medio' },
                { country: 'Uruguay', capital: 'Montevideo', difficulty: 'facil' },
                { country: 'Venezuela', capital: 'Caracas', difficulty: 'facil' },
                { country: 'Belice', capital: 'Belmop√°n', difficulty: 'medio' },
                { country: 'Costa Rica', capital: 'San Jos√©', difficulty: 'facil' },
                { country: 'El Salvador', capital: 'San Salvador', difficulty: 'medio' },
                { country: 'Guatemala', capital: 'Ciudad de Guatemala', difficulty: 'facil' },
                { country: 'Honduras', capital: 'Tegucigalpa', difficulty: 'medio' },
                { country: 'Nicaragua', capital: 'Managua', difficulty: 'medio' },
                { country: 'Panam√°', capital: 'Ciudad de Panam√°', difficulty: 'facil' }
            ],
            oceania: [
                { country: 'Australia', capital: 'Canberra', difficulty: 'facil' },
                { country: 'Nueva Zelanda', capital: 'Wellington', difficulty: 'facil' },
                { country: 'Pap√∫a Nueva Guinea', capital: 'Puerto Moresby', difficulty: 'medio' }
            ],
            africa: [
                { country: 'Egipto', capital: 'El Cairo', difficulty: 'facil' },
                { country: 'Sud√°frica', capital: 'Pretoria', difficulty: 'facil' },
                { country: 'Nigeria', capital: 'Abuya', difficulty: 'facil' },
                { country: 'Kenia', capital: 'Nairobi', difficulty: 'facil' },
                { country: 'Etiop√≠a', capital: 'Ad√≠s Abeba', difficulty: 'facil' },
                { country: 'Marruecos', capital: 'Rabat', difficulty: 'facil' },
                { country: 'Argelia', capital: 'Argel', difficulty: 'facil' },
                { country: 'Ghana', capital: 'Acra', difficulty: 'facil' },
                { country: 'Tanzania', capital: 'Dodoma', difficulty: 'medio' },
                { country: 'Uganda', capital: 'Kampala', difficulty: 'medio' },
                { country: 'Angola', capital: 'Luanda', difficulty: 'medio' },
                { country: 'Mozambique', capital: 'Maputo', difficulty: 'medio' },
                { country: 'Madagascar', capital: 'Antananarivo', difficulty: 'medio' },
                { country: 'Camer√∫n', capital: 'Yaund√©', difficulty: 'medio' },
                { country: 'Costa de Marfil', capital: 'Yamusukro', difficulty: 'medio' },
                { country: 'N√≠ger', capital: 'Niamey', difficulty: 'medio' },
                { country: 'Burkina Faso', capital: 'Uagadug√∫', difficulty: 'medio' },
                { country: 'Mal√≠', capital: 'Bamako', difficulty: 'medio' },
                { country: 'Malaui', capital: 'Lilong√ºe', difficulty: 'medio' },
                { country: 'Zambia', capital: 'Lusaka', difficulty: 'medio' },
                { country: 'Senegal', capital: 'Dakar', difficulty: 'medio' },
                { country: 'Somalia', capital: 'Mogadiscio', difficulty: 'medio' },
                { country: 'Chad', capital: 'Yamena', difficulty: 'medio' },
                { country: 'Zimbabue', capital: 'Harare', difficulty: 'medio' },
                { country: 'Guinea', capital: 'Conakri', difficulty: 'medio' },
                { country: 'Ruanda', capital: 'Kigali', difficulty: 'medio' },
                { country: 'Ben√≠n', capital: 'Porto Novo', difficulty: 'medio' },
                { country: 'Burundi', capital: 'Gitega', difficulty: 'dificil' },
                { country: 'T√∫nez', capital: 'T√∫nez', difficulty: 'facil' },
                { country: 'Sud√°n del Sur', capital: 'Yuba', difficulty: 'dificil' },
                { country: 'Togo', capital: 'Lom√©', difficulty: 'medio' },
                { country: 'Sierra Leona', capital: 'Freetown', difficulty: 'medio' },
                { country: 'Libia', capital: 'Tr√≠poli', difficulty: 'facil' },
                { country: 'Liberia', capital: 'Monrovia', difficulty: 'medio' },
                { country: 'Mauritania', capital: 'Nuakchot', difficulty: 'medio' },
                { country: 'Rep√∫blica Centroafricana', capital: 'Bangui', difficulty: 'dificil' },
                { country: 'Eritrea', capital: 'Asmara', difficulty: 'dificil' },
                { country: 'Gambia', capital: 'Banjul', difficulty: 'dificil' },
                { country: 'Botsuana', capital: 'Gaborone', difficulty: 'medio' },
                { country: 'Namibia', capital: 'Windhoek', difficulty: 'medio' },
                { country: 'Gab√≥n', capital: 'Libreville', difficulty: 'medio' },
                { country: 'Lesoto', capital: 'Maseru', difficulty: 'dificil' },
                { country: 'Guinea-Bis√°u', capital: 'Bis√°u', difficulty: 'dificil' },
                { country: 'Guinea Ecuatorial', capital: 'Malabo', difficulty: 'dificil' },
                { country: 'Mauricio', capital: 'Port Louis', difficulty: 'dificil' },
                { country: 'Suazilandia', capital: 'Mbabane', difficulty: 'dificil' },
                { country: 'Yibuti', capital: 'Yibuti', difficulty: 'dificil' },
                { country: 'Comoras', capital: 'Moroni', difficulty: 'dificil' },
                { country: 'Cabo Verde', capital: 'Praia', difficulty: 'dificil' },
                { country: 'Santo Tom√© y Pr√≠ncipe', capital: 'Santo Tom√©', difficulty: 'dificil' },
                { country: 'Seychelles', capital: 'Victoria', difficulty: 'dificil' },
                { country: 'Sud√°n', capital: 'Jartum', difficulty: 'medio' },
                { country: 'Congo', capital: 'Brazzaville', difficulty: 'medio' },
                { country: 'Rep√∫blica Democr√°tica del Congo', capital: 'Kinsasa', difficulty: 'medio' }
            ],
            asia: [
                { country: 'China', capital: 'Pek√≠n', difficulty: 'facil' },
                { country: 'India', capital: 'Nueva Delhi', difficulty: 'facil' },
                { country: 'Jap√≥n', capital: 'Tokio', difficulty: 'facil' },
                { country: 'Corea del Sur', capital: 'Se√∫l', difficulty: 'facil' },
                { country: 'Indonesia', capital: 'Yakarta', difficulty: 'facil' },
                { country: 'Filipinas', capital: 'Manila', difficulty: 'facil' },
                { country: 'Tailandia', capital: 'Bangkok', difficulty: 'facil' },
                { country: 'Vietnam', capital: 'Han√≥i', difficulty: 'facil' },
                { country: 'Turqu√≠a', capital: 'Ankara', difficulty: 'facil' },
                { country: 'Ir√°n', capital: 'Teher√°n', difficulty: 'facil' },
                { country: 'Irak', capital: 'Bagdad', difficulty: 'facil' },
                { country: 'Arabia Saudita', capital: 'Riad', difficulty: 'facil' },
                { country: 'Pakist√°n', capital: 'Islamabad', difficulty: 'facil' },
                { country: 'Afganist√°n', capital: 'Kabul', difficulty: 'medio' },
                { country: 'Banglad√©s', capital: 'Daca', difficulty: 'medio' },
                { country: 'Malasia', capital: 'Kuala Lumpur', difficulty: 'medio' },
                { country: 'Singapur', capital: 'Singapur', difficulty: 'medio' },
                { country: 'Israel', capital: 'Jerusal√©n', difficulty: 'facil' },
                { country: 'Siria', capital: 'Damasco', difficulty: 'medio' },
                { country: 'Jordania', capital: 'Am√°n', difficulty: 'medio' },
                { country: 'L√≠bano', capital: 'Beirut', difficulty: 'medio' },
                { country: 'Yemen', capital: 'San√°', difficulty: 'medio' },
                { country: 'Om√°n', capital: 'Mascate', difficulty: 'medio' },
                { country: 'Emiratos √Årabes Unidos', capital: 'Abu Dabi', difficulty: 'medio' },
                { country: 'Kuwait', capital: 'Kuwait', difficulty: 'medio' },
                { country: 'Catar', capital: 'Doha', difficulty: 'medio' },
                { country: 'Bar√©in', capital: 'Manama', difficulty: 'dificil' },
                { country: 'Camboya', capital: 'Nom Pen', difficulty: 'medio' },
                { country: 'Laos', capital: 'Vienti√°n', difficulty: 'medio' },
                { country: 'Myanmar', capital: 'Naipyid√≥', difficulty: 'medio' },
                { country: 'Sri Lanka', capital: 'Sri Jayawardenapura', difficulty: 'dificil' },
                { country: 'Nepal', capital: 'Katmand√∫', difficulty: 'medio' },
                { country: 'But√°n', capital: 'Timbu', difficulty: 'dificil' },
                { country: 'Maldivas', capital: 'Mal√©', difficulty: 'dificil' },
                { country: 'Mongolia', capital: 'Ul√°n Bator', difficulty: 'medio' },
                { country: 'Corea del Norte', capital: 'Pionyang', difficulty: 'medio' },
                { country: 'Kazajist√°n', capital: 'Astan√°', difficulty: 'medio' },
                { country: 'Uzbekist√°n', capital: 'Taskent', difficulty: 'medio' },
                { country: 'Turkmenist√°n', capital: 'Asjabad', difficulty: 'dificil' },
                { country: 'Kirguist√°n', capital: 'Biskek', difficulty: 'dificil' },
                { country: 'Tayikist√°n', capital: 'Dusamb√©', difficulty: 'dificil' },
                { country: 'Armenia', capital: 'Erev√°n', difficulty: 'medio' },
                { country: 'Azerbaiy√°n', capital: 'Bak√∫', difficulty: 'medio' },
                { country: 'Georgia', capital: 'Tiflis', difficulty: 'medio' },
                { country: 'Brun√©i', capital: 'Bandar Seri Begawan', difficulty: 'dificil' },
                { country: 'Timor Oriental', capital: 'Dili', difficulty: 'dificil' }
            ]
        };

        // Variables de estado
        let currentContinent = '';
        let currentCapitals = [];
        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let selectedAnswer = false;
        let difficulty = 'facil';
        let failedQuestions = [];
        let isReviewMode = false;

        function selectContinent(continent) {
            currentContinent = continent;
            
            const titles = {
                'europa': 'üá™üá∫ Europa',
                'africa': 'üåç √Åfrica',
                'america-norte': 'üóΩ Am√©rica del Norte',
                'america-sur': 'üóø Am√©rica del Sur',
                'asia': 'üèØ Asia',
                'oceania': 'ü¶ò Ocean√≠a'
            };
            
            document.getElementById('continentTitle').textContent = titles[continent];
            document.getElementById('continentMenu').style.display = 'none';
            document.getElementById('difficultyBox').style.display = 'block';
            
            updateDifficultyInfo();
        }

        function updateDifficultyInfo() {
            const diff = document.getElementById('difficulty').value;
            const caps = getDifficultyCapitals();
            document.getElementById('difficultyInfo').textContent = `Este nivel tiene ${caps.length} preguntas`;
        }

        document.getElementById('difficulty').addEventListener('change', updateDifficultyInfo);

        function backToMenu() {
            document.getElementById('continentMenu').style.display = 'block';
            document.getElementById('difficultyBox').style.display = 'none';
            document.getElementById('statsBox').style.display = 'none';
            document.getElementById('progressBox').style.display = 'none';
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('finalScore').classList.remove('show');
            
            // Resetear variables
            currentContinent = '';
            currentCapitals = [];
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            failedQuestions = [];
            isReviewMode = false;
        }

        function confirmBackToMenu() {
            if (confirm('¬øSeguro que quieres salir? Perder√°s el progreso actual.')) {
                backToMenu();
            }
        }

        function getDifficultyCapitals() {
            const allCaps = capitalsData[currentContinent] || [];
            
            if (difficulty === 'facil') {
                return allCaps.filter(c => c.difficulty === 'facil');
            } else if (difficulty === 'medio') {
                return allCaps.filter(c => c.difficulty === 'facil' || c.difficulty === 'medio');
            } else {
                return allCaps;
            }
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function getRandomOptions(correctCapital) {
            const otherCapitals = currentCapitals.filter(c => c.capital !== correctCapital);
            const shuffled = shuffleArray(otherCapitals);
            const wrongOptions = shuffled.slice(0, 2).map(c => c.capital);
            const allOptions = [correctCapital, ...wrongOptions];
            return shuffleArray(allOptions);
        }

        function showQuestion() {
            selectedAnswer = false;
            const current = currentCapitals[currentQuestion];
            
            document.getElementById('countryName').textContent = current.country;
            document.getElementById('questionNumber').textContent = `Pregunta ${currentQuestion + 1} de ${currentCapitals.length}`;
            document.getElementById('questionCounter').textContent = `${currentQuestion + 1}/${currentCapitals.length}`;
            
            const options = getRandomOptions(current.capital);
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            options.forEach(option => {
                const div = document.createElement('div');
                div.className = 'option';
                div.textContent = option;
                div.onclick = () => checkAnswer(option, current.capital, div);
                optionsContainer.appendChild(div);
            });

            document.getElementById('feedback').classList.remove('show');
            document.getElementById('btnNext').classList.remove('show');

            const progress = ((currentQuestion + 1) / currentCapitals.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function checkAnswer(selected, correct, element) {
            if (selectedAnswer) return;
            selectedAnswer = true;

            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.add('disabled'));

            const feedback = document.getElementById('feedback');
            const currentCountry = currentCapitals[currentQuestion];
            
            if (selected === correct) {
                element.classList.add('correct');
                feedback.textContent = '¬°Correcto! üéâ';
                feedback.className = 'feedback correct show';
                score += 10;
                correctAnswers++;
            } else {
                element.classList.add('incorrect');
                feedback.textContent = `Incorrecto. La capital de ${currentCountry.country} es ${correct}`;
                feedback.className = 'feedback incorrect show';
                
                failedQuestions.push(currentCountry);
                
                options.forEach(opt => {
                    if (opt.textContent === correct) {
                        opt.classList.add('correct');
                    }
                });
            }

            document.getElementById('score').textContent = score;
            document.getElementById('correctCount').textContent = correctAnswers;

            if (currentQuestion < currentCapitals.length - 1) {
                document.getElementById('btnNext').classList.add('show');
            } else {
                setTimeout(showFinalScore, 1500);
            }
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < currentCapitals.length) {
                showQuestion();
            }
        }

        function showFinalScore() {
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('statsBox').style.display = 'none';
            document.getElementById('progressBox').style.display = 'none';
            
            const percentage = Math.round((correctAnswers / currentCapitals.length) * 100);
            let emoji = '';
            let message = '';
            
            if (percentage === 100) {
                emoji = 'üèÜ';
                message = '¬°PERFECTO! ¬°Eres un experto en capitales!';
            } else if (percentage >= 90) {
                emoji = 'üåü';
                message = '¬°Sobresaliente! Excelente conocimiento';
            } else if (percentage >= 75) {
                emoji = 'üéØ';
                message = '¬°Notable! Muy bien hecho';
            } else if (percentage >= 60) {
                emoji = 'üëç';
                message = '¬°Bien! Sigue practicando';
            } else if (percentage >= 40) {
                emoji = 'üìö';
                message = 'Necesitas repasar un poco m√°s';
            } else {
                emoji = 'üí™';
                message = '¬°√Ånimo! Practica m√°s y mejorar√°s';
            }

            document.getElementById('finalEmoji').textContent = emoji;
            document.getElementById('finalPoints').textContent = `${score} puntos`;
            
            const failedCount = failedQuestions.length;
            const modeText = isReviewMode ? ' (Modo Repaso)' : '';
            
            let finalMessageHTML = `
                ${message}<br>
                <span style="font-size: 18px; color: #666;">
                    Has acertado ${correctAnswers} de ${currentCapitals.length} preguntas (${percentage}%)${modeText}
                </span>
            `;
            
            if (failedCount > 0) {
                finalMessageHTML += `
                    <br><br>
                    <span style="font-size: 16px; color: #f44336;">
                        ‚ùå Has fallado ${failedCount} pregunta${failedCount > 1 ? 's' : ''}
                    </span>
                `;
            }
            
            document.getElementById('finalMessage').innerHTML = finalMessageHTML;
            
            const buttonsHTML = failedCount > 0 
                ? `
                    <button class="btn-restart" onclick="startReview()">
                        üìö Repasar falladas (${failedCount})
                    </button>
                    <button class="btn-restart" onclick="backToMenu()" style="background: #f44336;">
                        ‚ùå Fin
                    </button>
                  `
                : '';
            
            document.getElementById('finalButtons').innerHTML = buttonsHTML;
            document.getElementById('finalScore').classList.add('show');
        }

        function startReview() {
            isReviewMode = true;
            currentCapitals = [...failedQuestions];
            failedQuestions = [];
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            
            document.getElementById('score').textContent = '0';
            document.getElementById('correctCount').textContent = '0';
            document.getElementById('finalScore').classList.remove('show');
            document.getElementById('statsBox').style.display = 'block';
            document.getElementById('progressBox').style.display = 'block';
            document.getElementById('gameArea').style.display = 'block';
            
            showQuestion();
        }

        function startGame() {
            difficulty = document.getElementById('difficulty').value;
            currentCapitals = shuffleArray(getDifficultyCapitals());
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            failedQuestions = [];
            isReviewMode = false;
            
            document.getElementById('score').textContent = '0';
            document.getElementById('correctCount').textContent = '0';
            document.getElementById('difficultyBox').style.display = 'none';
            document.getElementById('statsBox').style.display = 'block';
            document.getElementById('progressBox').style.display = 'block';
            document.getElementById('gameArea').style.display = 'block';
            
            showQuestion();
        }

        document.getElementById('btnNext').onclick = nextQuestion;
    </script>
</body>
</html>